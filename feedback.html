<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feedback Insights</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
--bg:#f8fafc;
--card:rgba(255,255,255,0.85);
--text:#0f172a;
--muted:#64748b;
--accent:#2563eb;
--border:rgba(0,0,0,.08);
--glass:blur(18px);
}
body.dark{
--bg:#0f172a;
--card:rgba(30,41,59,0.75);
--text:#f1f5f9;
--muted:#94a3b8;
--accent:#3b82f6;
--border:rgba(255,255,255,.08);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Outfit',sans-serif;}
body{background:var(--bg);color:var(--text);transition:.3s}

/* ===== HEADER ===== */
.header{
position:fixed;top:0;left:0;right:0;height:75px;
backdrop-filter:var(--glass);
background:var(--card);
border-bottom:1px solid var(--border);
display:flex;align-items:center;
padding:0 18px;z-index:1000;
}
.menu-btn{font-size:22px;cursor:pointer;}
.logo-wrap{display:flex;align-items:center;gap:10px;margin-left:12px;}
.logo-wrap img{height:36px;border-radius:8px;}
.spacer{flex:1;}
.page-title{font-weight:600;}

/* ===== DRAWER ===== */
.overlay{
position:fixed;inset:0;background:rgba(0,0,0,.5);
display:none;z-index:2000;
}
.drawer{
position:fixed;left:-280px;top:0;width:270px;height:100%;
backdrop-filter:var(--glass);
background:var(--card);
padding:20px;transition:.4s;z-index:3000;
}
.drawer.active{left:0}
.overlay.active{display:block}
.menu-item{
display:block;padding:14px;border-radius:14px;margin-bottom:10px;
background:var(--bg);text-decoration:none;color:var(--text);
}
.menu-item:hover{background:var(--accent);color:#fff}
.theme-toggle{
margin-top:20px;padding:10px;border-radius:20px;
background:var(--bg);text-align:center;cursor:pointer;
}

/* ===== NOTIFICATION OVERLAY ===== */
#feedback-notification{
position:fixed;
top:90px;
left:50%;
transform:translateX(-50%);
width:90%;
max-width:600px;
background:linear-gradient(135deg,#f59e0b,#fcd34d);
padding:18px;
border-radius:15px;
display:flex;
justify-content:space-between;
align-items:center;
z-index:4000;
box-shadow:0 15px 40px rgba(0,0,0,.25);
}
#notif-close{
cursor:pointer;
font-weight:bold;
font-size:20px;
}

/* ===== MAIN ===== */
.container{
max-width:950px;
margin:120px auto 100px;
padding:30px;
background:var(--card);
border-radius:22px;
border:1px solid var(--border);
box-shadow:0 20px 60px rgba(0,0,0,.15);
}

h2{text-align:center;margin-bottom:25px;}

input,textarea{
width:100%;padding:12px;margin-bottom:14px;
border-radius:12px;border:1px solid var(--border);
background:var(--bg);color:var(--text);
}

button{
padding:12px 20px;border:none;border-radius:14px;
background:var(--accent);color:#fff;cursor:pointer;
}
button:disabled{opacity:.6;cursor:not-allowed;}

#fb-stars-container{font-size:2rem;margin-bottom:15px;color:gold;cursor:pointer;}
.star{margin-right:6px;transition:.2s;}
.star:hover{transform:scale(1.2);}

.feedback-box{
background:linear-gradient(145deg,#ffffff,#f0f4f8);
padding:22px;border-radius:18px;margin-bottom:20px;
border:1px solid var(--border);
box-shadow:0 12px 30px rgba(0,0,0,.08);
}

.fb-header{display:flex;justify-content:space-between;font-weight:600;margin-bottom:6px;}
.fb-footer{font-size:.8rem;color:var(--muted);}
.fb-reply{
margin-top:8px;padding:8px;
border-left:4px solid var(--accent);
background:rgba(37,99,235,.1);
border-radius:8px;
}

/* SUCCESS TOAST */
#success-toast{
position:fixed;
top:90px;
right:20px;
background:#22c55e;
color:#fff;
padding:14px 22px;
border-radius:14px;
display:none;
z-index:5000;
box-shadow:0 10px 30px rgba(0,0,0,.25);
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
<div class="menu-btn" onclick="openDrawer()">‚ò∞</div>
<div class="logo-wrap">
<img src="https://lh3.googleusercontent.com/pw/AP1GczP1FxDyqLI0EVbXpZEhgt9c9LvyJMaTUX4jySqgZ9FUGW0Zzzu8h4yf1y2XpVsmFGpOMMDgNbDF5MtnNfHQbh51Hq1V7kJLmQIJGnxFyi2ospz1ufeepCbpJ_63zAllNYgjQmOZxVhYwuQ9JVlZET86=w865-h900-s-no-gm">
<span class="page-title">Feedback Insights</span>
</div>
<div class="spacer"></div>
</div>

<!-- DRAWER -->
<div class="overlay" onclick="closeDrawer()"></div>
<div class="drawer" id="drawer">
<h3>Menu</h3>
<a href="index.html" class="menu-item">Home</a>
<a href="insightstv.html" class="menu-item">Insights TV</a>
<a href="vimaan.html" class="menu-item">VIMAAN AI</a>
<a href="blogs.html" class="menu-item">Blogs</a>
<a href="feedback.html" class="menu-item">Feedback</a>
<div class="theme-toggle" onclick="toggleTheme()">Toggle Dark Mode</div>
</div>

<!-- NOTIFICATION -->
<div id="feedback-notification">
<span>üí¨ Your feedback matters! Please give stars honestly.</span>
<span id="notif-close">√ó</span>
</div>

<!-- SUCCESS -->
<div id="success-toast">Feedback Saved Successfully</div>

<div class="container">
<h2>Share Your Experience</h2>

<form id="feedback-form">
<input type="text" id="fb-name" placeholder="Your Name" required>
<div id="fb-stars-container"></div>
<textarea id="fb-message" placeholder="Write your feedback (Optional)"></textarea>
<button type="submit" id="submit-feedback-btn" disabled>Submit Feedback</button>
<span id="loading-spinner" style="display:none;">‚è≥ Submitting...</span>
</form>

<h3 style="margin-top:30px;">Recent Feedbacks</h3>
<div id="feedback-list"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyA1IBtb9pbg8l4gCXlorOJ7s3YBrWIHOc4",
authDomain: "vishalsurya-e20d1.firebaseapp.com",
databaseURL: "https://vishalsurya-e20d1-default-rtdb.firebaseio.com",
projectId: "vishalsurya-e20d1",
storageBucket: "vishalsurya-e20d1.appspot.com",
messagingSenderId: "194632949134",
appId: "1:194632949134:web:51529cbba293730fb318df"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let selectedStars = 0;

const nameInput = document.getElementById("fb-name");
const starsContainer = document.getElementById("fb-stars-container");
const submitBtn = document.getElementById("submit-feedback-btn");
const spinner = document.getElementById("loading-spinner");
const toast = document.getElementById("success-toast");
const list = document.getElementById("feedback-list");

for(let i=1;i<=5;i++){
const star=document.createElement("span");
star.className="star";
star.innerHTML="‚òÜ";
star.onclick=()=>{
selectedStars=i;
document.querySelectorAll(".star").forEach((s,index)=>{
s.innerHTML=index<i?"‚òÖ":"‚òÜ";
});
validate();
};
starsContainer.appendChild(star);
}

nameInput.addEventListener("input",validate);

function validate(){
submitBtn.disabled=!nameInput.value.trim()||selectedStars<1;
}

document.getElementById("feedback-form").addEventListener("submit",(e)=>{
e.preventDefault();
spinner.style.display="inline-block";
submitBtn.disabled=true;

push(ref(db,"feedbacks"),{
name:nameInput.value.trim(),
message:document.getElementById("fb-message").value.trim(),
stars:selectedStars,
timestamp:new Date().toISOString()
}).then(()=>{
spinner.style.display="none";
toast.style.display="block";
setTimeout(()=>{toast.style.display="none";},3000);
document.getElementById("feedback-form").reset();
selectedStars=0;
document.querySelectorAll(".star").forEach(s=>s.innerHTML="‚òÜ");
validate();
});
});

onValue(ref(db,"feedbacks"),(snapshot)=>{
list.innerHTML="";
snapshot.forEach(child=>{
const fb=child.val();
const box=document.createElement("div");
box.className="feedback-box";
box.innerHTML=`
<div class="fb-header">
<span>${fb.name}</span>
<span>${"‚òÖ".repeat(fb.stars)}${"‚òÜ".repeat(5-fb.stars)}</span>
</div>
<p>${fb.message||""}</p>
<div class="fb-footer">${new Date(fb.timestamp).toLocaleString()}</div>
${fb.reply?`<div class="fb-reply">üí¨ ${fb.reply}</div>`:""}
`;
list.prepend(box);
});
});
</script>

<script>
function openDrawer(){
drawer.classList.add("active");
document.querySelector(".overlay").classList.add("active");
}
function closeDrawer(){
drawer.classList.remove("active");
document.querySelector(".overlay").classList.remove("active");
}
function toggleTheme(){
document.body.classList.toggle("dark");
}
document.getElementById("notif-close").onclick=()=>{
document.getElementById("feedback-notification").style.display="none";
};
</script>

</body>
</html>
